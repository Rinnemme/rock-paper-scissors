<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>RPS</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="content">
        <div class="rule-message">
            <div class="heading">
                <img src="img/heading.svg" width=80%>
            </div>
            <div class="rules">
                <div class="rule-button">
                    Rules
                </div> 
            </div>
            <div class="message">
                <div id="message-text">
                    Click a button below to make your first throw
                </div>
            </div>
        </div>
        <div class="game-buttons">
            <div class="rock">
                <img class="throw-button" id="rock-button" src="img/rock.png" width="100%">
            </div>
            <div class="paper">
                <img class="throw-button" id="paper-button" src="img/paper.png" width="100%">
            </div>
            <div class="scissors">
                <img class="throw-button" id="scissors-button" src="img/scissors.png" width="100%">
            </div>
        </div>
        <div class="scoreboard">
            <div class="score-heading">
                Score:
            </div>
            <div class="score-boxes">
                <div id="human-score">
                    
                </div>
                <div id="bot-score">
                    
                </div>
            </div>
            <div class="reset">
                <div id="reset-button">
                    Reset
                </div>
            </div>
        </div>
    </div>
    <div id="rules-window">
        <div class="rules-header">
            Rules
            <div id="close-rules">
            x
            </div>
        </div>
        <div class="rules-content">
            Each of us will pick either rock, paper, or scissors, 
            and the winner of each round will be determined by the folowing rules:
            <ul>
                <li>Rock smashes scissors</li>
                <li>Paper covers rock</li>
                <li>Scissors cut paper</li>
            </ul>
            Of course, if we tie, nobody gains a point.<br><br>
            Ours will be a game to five, though of course we can play as many games as you'd like!
        </div>
    </div>
    <script>
        let HumanThrow;
        const Throws = ["Rock","Paper","Scissors"];
        let BotThrow;
        let BotCount = 0;
        let HumanCount = 0;
        const BotScore = document.getElementById("bot-score");
        const HumanScore = document.getElementById("human-score");
        const RockButton = document.getElementById("rock-button");
        const PaperButton = document.getElementById("paper-button");
        const ScissorsButton =  document.getElementById("scissors-button");
        const Reset =  document.getElementById("reset-button");
        const Message = document.getElementById("message-text");
        BotScore.textContent = `Me: ${BotCount}`
        HumanScore.textContent = `You: ${HumanCount}`
        

        RockButton.addEventListener("click",getRock)
        PaperButton.addEventListener("click",getPaper)
        ScissorsButton.addEventListener("click",getScissors)
        Reset.addEventListener("click",resetGame)

        function getBotThrow() {
            return Throws[Math.floor(Math.random()*3)]
        }

        function getRock() {
            HumanThrow = "Rock";
            BotThrow = Throws[Math.floor(Math.random()*3)];
            console.log(BotThrow);
            runGame();
        }

        function getPaper() {
            HumanThrow = "Paper";
            BotThrow = Throws[Math.floor(Math.random()*3)];
            console.log(BotThrow);
            runGame();
        }

        function getScissors() {
            HumanThrow = "Scissors";
            BotThrow = Throws[Math.floor(Math.random()*3)];
            console.log(BotThrow);
            runGame();
        }



        function runGame() {
            if (HumanCount === 5) {
                Message.textContent = "You already won! Press reset to play again";
            } else if (BotCount === 5) {
                Message.textContent = "I already won! Press reset to play again";
            }
            else if (HumanThrow===BotThrow) {
                Message.textContent = "Oh dang, we tied!";
            }
            else if (HumanThrow==="Rock") {
                if (BotThrow==="Scissors") {
                    Message.textContent = "Your rock smashes my scissors!";
                    addHumanWin();
                }
                if (BotThrow==="Paper") {
                    Message.textContent = "My paper covers your rock!";
                    addBotWin();
                }
            } else if (HumanThrow==="Paper") {
                if (BotThrow==="Rock") {
                    Message.textContent = "Your paper covers my rock!";
                    addHumanWin();
                }
                if (BotThrow==="Scissors") {
                    Message.textContent = "My Scissors cut your paper!";
                    addBotWin();
                }
            } else if (HumanThrow==="Scissors") {
                if (BotThrow==="Paper") {
                    Message.textContent = "Your scissors cut my paper!";
                    addHumanWin();
                }
                if (BotThrow==="Rock") {
                    Message.textContent = "My rock smashes your scissors!";
                    addBotWin();
                }
            }
        }

        function addBotWin() {
            ++BotCount;
            BotScore.textContent = `Me: ${BotCount}`;
            BotScore.style.backgroundColor = "rgb(249,201,197)";
            HumanScore.style.backgroundColor = "rgb(239,239,239)";
            testWin();
        }

        function addHumanWin () {
            ++HumanCount;
            HumanScore.textContent = `You: ${HumanCount}`;
            HumanScore.style.backgroundColor = "rgb(201,240,230)";
            BotScore.style.backgroundColor = "rgb(239,239,239)";
            testWin();
        }

        function testWin() {
            if (HumanCount === 5) {
                Message.style.backgroundColor = "rgb(201,240,230)";
                Message.textContent = "You've won our game to 5!";
            } else if (BotCount === 5) {
                Message.style.backgroundColor = "rgb(249,201,197)";
                Message.textContent = "I've won our game to 5!";
            }
            else return;
        }

        function resetGame() {
            HumanCount=0;
            HumanScore.textContent = `You: ${HumanCount}`;
            BotCount=0;
            BotScore.textContent = `Me: ${BotCount}`;
            Message.textContent = "Click a button below to make your first throw";
            HumanScore.style.backgroundColor = "rgb(239,239,239)"
            Message.style.backgroundColor = "rgb(239,239,239)"
            BotScore.style.backgroundColor = "rgb(239,239,239)"
        }
    </script>
</body>
</html>